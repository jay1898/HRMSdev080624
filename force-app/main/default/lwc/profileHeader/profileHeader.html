<template>
  <div class="overrideStyle"></div>
  <lightning-card>
    <div class="mainContainer">
      <div class="slds-page-header header">
        <div class="container">
          <div style="display: inline-block;">
            <!-- Itech-Logo Image -->
            <img style=" width: 100px; height: 100px;" alt="iTechCloud Logo" src={iTechlogo}>
          </div>
          <div>
            <!-- Round-circle in Process-Bar -->
            <div class="processBar">
              <div class="slds-col slds-large-size_3-of-12 slds-medium-size_1-of-12 slds-size_1-of-12">
                <div class="progressText">
                  <span class="pogressNum" onclick={onSkill} data-msg="20">1</span>
                  <div class="progressText">Employee</div>
                </div>
              </div>
              <div class="slds-col slds-large-size_3-of-12 slds-medium-size_1-of-12 slds-size_1-of-12">
                <div class="progressText">
                  <span class="pogressNum" onclick={onCertificate} data-msg="40">2</span>
                  <div class="progressText">Certificate</div>
                </div>
              </div>
              <div class="slds-col slds-large-size_3-of-12 slds-medium-size_1-of-12 slds-size_1-of-12">
                <div class="progressText">
                  <span class="pogressNum" onclick={onExperience} data-msg="60">3</span>
                  <div class="progressText">Experience</div>
                </div>
              </div>
              <div class="slds-col slds-large-size_3-of-12 slds-medium-size_1-of-12 slds-size_1-of-12">
                <div class="progressText">
                  <span class="pogressNum" onclick={onSymmary} data-msg="80">4</span>
                  <div class="progressText">Summary</div>
                </div>
              </div>
              <div class="slds-col slds-large-size_3-of-12 slds-medium-size_1-of-12 slds-size_1-of-12">
                <div class="progressText">
                  <span class="pogressNum" onclick={progressHandleClick} data-msg="100">5</span>
                  <div class="progressText">Review</div>
                </div>
              </div>
            </div>
            <!-- Progress-Line -->
            <div class="pogressLine">
              <lightning-progress-bar class="slds-progress-bar__value_success" value={progressValue} variant="circular"
                style="color: #37A000;">
              </lightning-progress-bar>
            </div>
          </div>
        </div>
      </div>

      <!-- Skill Section template -->
      <template lwc:if={skillPage}>
        <!-- <c-employee-skill-page record-object={recordObject}
          oncertificatepage={handleFromSkillPage}></c-employee-skill-page> -->
        <div class="headingContainer">
          <h1><span>ADD</span> EMPLOYEE & SKILL</h1>
        </div>
        <div class="combox">
          <div class="slds-size_1-of-2">
            <label for="combobox"><span class="starColor">*</span>Select Employee</label>
            <!-- old code <lightning-combobox id="employee" class="strong-text" name="employee" options={employeeOptions}
              value={value} onchange={handleChange} style="margin-top: -16px;"></lightning-combobox> -->
            <div style="margin-top: -16px;">
              <!-- lightning input for selection of employee -->
              <lightning-input class="employeeInputText" type="search" onfocus={showPicklistOptions} onchange={search}
                value={selectedValue} placeholder="Please Select Employee">
              </lightning-input>
              <div if:true={searchResults} class="slds-dropdown slds-dropdown_length-5 " role="listbox">
                <ul class="slds-listbox slds-listbox_vertical" role="presentation">
                  <template for:each={searchResults} for:item="searchResult">
                    <li key={searchResult.value} data-value={searchResult.value} role="presentation"
                      onclick={selectSearchResult} class="slds-listbox__item">
                      <div class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small "
                        role="option">
                        <span class="slds-media__body">
                          <span class="slds-truncate" title={searchResult.label}>
                            {searchResult.label}
                          </span>
                        </span>
                      </div>
                    </li>
                  </template>
                </ul>
              </div>
            </div>

          </div>
        </div>

        <div class="droupDownContainer">
          <div class="slds-p-horizontal_small">
            <label for="combobox"><span>*</span>Select Skills</label>
            <div style="margin-top: -16px;">
              <template lwc:if={spinner}>
                <div>
                  <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
                </div>
              </template>
              <c-custom-multi-pick-list required="true" showpills="true" role="cm-picklist"></c-custom-multi-pick-list>
            </div>
          </div>
        </div>
      </template>
      <!-- Certificate Section Teamplate -->
      <template lwc:if={certificatePage} style="display: flex; flex-direction:column">
        <c-upload-certificate options-from-parent={certificateOptions} record-object={recordObject}
          onexperiencepage={handleFromCertificatePage} onbacktoskillpage={handleBackToSkillPage}></c-upload-certificate>
      </template>
      <!-- Experience Section Template -->
      <template lwc:if={experiencePage}>
        <c-experience-details record-object={recordObject} onsummarypage={handleFromExperiencePage}
          onbacktocertificatepage={handleBackToCertificatePage}></c-experience-details>
      </template>
      <!-- Summary Section Template -->
      <template lwc:if={professionalSummaryPage}>
        <c-professional-summary record-object={recordObject} profile-data={profileData}
          onprofilepreviewpage={handleFromSummaryPage}
          onbacktoexperiencepage={handleBackToExperiencePage}></c-professional-summary>
      </template>
      <!-- Preview Section Template -->
      <template lwc:if={profilePreviewPage}>
        <c-resume-builder profile-data={profileData} profile-content-version-id={profileId}></c-resume-builder>
        <!-- <c-profile-preview-page record-object={recordObject}
          onbacktosummarypage={handleBackToSummaryPage}></c-profile-preview-page> -->
      </template>
      <!-- Footer Button On skill ection  -->
      <template lwc:if={footerButtonOnSkillPage}>
        <div class="footerButtons">
          <div class="saveAndNextButtonDiv">
            <button class="slds-button slds-button_success saveAndNextButton" onclick={onNavigateToCertificatePage}>Save
              & Next</button>
          </div>
        </div>
      </template>
    </div>
  </lightning-card>

</template>