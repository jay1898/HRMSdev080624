<template>
	<lightning-spinner alternative-text="Loading" size="large" if:true={isLoading} variant="brand"></lightning-spinner>
	<div style="display: flex; justify-content:space-between">
		<div style="width: 65%;">
			<div class="tab-container">
				<ul class="tab-list">
					<li class="tab" data-tab="Announcement" onclick={handleTabClick}>Announcement</li>
					<li class="tab" data-tab="Post" onclick={handleTabClick} >Post</li>
					<li class="tab" data-tab="Holidays" onclick={handleTabClick}>Holidays</li>
				</ul>
				<div class="tab-indicator"></div>
			</div>
			<div class="main_div slds-p-top_large">
				<template if:true={isAnnouncementTab}>
					<div class="slds-p-top_large scroll_css">
						<!-- <lightning-card title="Announcement" icon-name="utility:announcement"> -->
						<div class="slds-grid slds-var-m-around_small">
							<lightning-input-rich-text value={announcement} onchange={handleCreateEvent}
								data-field="Content__c" aria-placeholder="Announcement" pattern="^\S.*\S$">
							</lightning-input-rich-text>
						</div>
						<div class="footerButtons">
							<div class="date_size slds-p-left_small">
							<label for="ExpirationDate">Select Expiration Date &nbsp; &nbsp;</label>
							<lightning-input type="date" value={dateValue} onchange={handleCreateEvent} data-field="Expiration_Date__c">
							</lightning-input>
						</div>
						
						<div style="text-align:end">
							<lightning-button class="slds-p-right_large" label="Cancel" onclick={handleCancel}
								variant="neutral"></lightning-button>
							<lightning-button class="slds-p-right_small" label="Save" onclick={handleSave}
								variant="brand"></lightning-button>
						</div>
						</div>
						

						<div class="first_div slds-m-around_medium">
							<template if:true={announcementList}>
								<template for:each={announcementList} for:item="ansmnt">
									<div key={ansmnt.Id} class="slds-box slds-m-bottom_small"
										style="background: #F1F1F1;">
										<div class="employee_Info slds-grid slds-var-m-around_small">
											<div class="image viewImage slds-p-right_small">
												<lightning-spinner if:true={isUploading} alternative-text="Uploading">
												</lightning-spinner>
												<img src={ansmnt.Profile_Photo} alt="Profile Image" class="profile-image"/>
										</div>
												<div class="employee_data">
													<div
														class="employee_name slds-text-heading_small">
														{ansmnt.Announced_by_Name}
														<div
														class="employee_date">
														{ansmnt.CreatedDate}</div>
														</div>
														<!-- <div
														class="employee_name slds-text-heading_small">
														{notification.CreatedDateFormatted}</div> -->
													<div class="edit_Delete">
														<template if:true={ansmnt.isEditable}>
															<button class="slds-button slds-button_icon" title="Edit" onclick={handleEditModal} data-announceid={ansmnt.Id}>
																<lightning-icon icon-name="utility:edit" size="x-small" class="box1"></lightning-icon>
																	<span class="slds-assistive-text">Edit</span>
															</button>
															<button class="slds-button slds-button_icon" title="Delete" onclick={deleteModal} data-announceid={ansmnt.Id}>
																<lightning-icon icon-name="utility:delete" size="x-small" class="box1"></lightning-icon>
																	<span class="slds-assistive-text">Delete</span>
															</button>
														</template>
													</div>
												</div>
											</div>


											<div class="Content_Info">
												<template if:true={ansmnt.Content__c}>
													<lightning-formatted-rich-text value={ansmnt.Content__c}>
													</lightning-formatted-rich-text>
												</template>
											</div>
										</div>
								</template>
							</template>
							<template if:true={error}>
								<p class="slds-text-color_error">{error}</p>
							</template>
							<lightning-button label="Refresh" onclick={refreshData} variant="brand"></lightning-button>
						</div>
					</div>
					

					<template if:true={isEditModalOpen}>

						<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-4" class="slds-modal slds-fade-in-open">
								<div class="slds-modal__container">
									<!-- modal header start -->
									<header class="slds-modal__header">
										<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handleCancel}>
											<lightning-icon icon-name="utility:close"
											alternative-text="close"
											variant="inverse"
											size="small" ></lightning-icon>
											<span class="slds-assistive-text">Close</span>
										</button>
										<h2 id="modal-heading-04" class="slds-text-heading_medium slds-hyphenate">Edit Announcement</h2>
									</header>
								
									<!-- modal body start -->
									<div class="slds-modal__content slds-p-around_medium" id="modal-content-id-4">
										
											<template for:each={editedAnnounceList} for:item="obj">
												<div key={obj.Id} class="slds-grid slds-var-m-around_small">
													<div class="slds-col slds-size_6-of-6">
														<template if:true={obj.Expiration_Date__c}>
															<b>Expiration Date : {obj.Expiration_Date__c}</b>
														</template>
														<lightning-input-rich-text value={obj.Content__c} onchange={handleContentChange} pattern="^\S.*\S$">
														</lightning-input-rich-text>
													</div>
												</div>
											</template>
										
										
										
									</div>

									<!-- modal footer start-->
									<footer class="slds-modal__footer">
										<button class="slds-button slds-button_neutral" onclick={handleCancel}>Cancel</button>
										<button class="slds-button slds-button_brand" onclick={handleSaveEdit}>Save</button>
									</footer>
								
								</div>
								</section>
								<div class="slds-backdrop slds-backdrop_open"></div>
							</template>
						<!-- <section role="dialog" tabindex="-1" aria-modal="true" class="slds-modal slds-fade-in-open">
							<div class="slds-modal__container">
								<header class="slds-modal__header">
									<button class="slds-button slds-button_icon slds-modal__close" title="Close" onclick={handleModalCancel}>
										<lightning-icon icon-name="utility:close" size="small"></lightning-icon>
										<span class="slds-assistive-text">Cancel</span>
									</button>
									<h2 class="slds-text-heading_medium">Edit Announcement</h2>
								</header>
								<div class="slds-modal__content slds-p-around_medium">
									<lightning-input-rich-text value={editedannounceList.Content__c} onchange={handleContentChange} len="1000">
									</lightning-input-rich-text>
								</div>
								<footer class="slds-modal__footer">
									<lightning-button variant="neutral" label="Cancel" onclick={handleModalCancel}>
									</lightning-button>
									<lightning-button variant="brand" label="Save" onclick={handleSaveEdit}>
									</lightning-button>
								</footer>
							</div>
						</section>
						<div class="slds-backdrop slds-backdrop_open"></div>
					</template> -->

					<template if:true={isDeleteModalOpen}>
						<section role="dialog" tabindex="-1" aria-modal="true" class="slds-modal slds-fade-in-open">
							<div class="slds-modal__container">
								<header class="slds-modal__header">
									<button class="slds-button slds-button_icon slds-modal__close" title="Close" onclick={handleCancel}>
                        <lightning-icon icon-name="utility:close" size="small"></lightning-icon>
                        <span class="slds-assistive-text">Cancel</span>
                    </button>
									<h2 class="slds-text-heading_medium">Delete Announcement</h2>
								</header>
								<div class="slds-modal__content slds-p-around_medium">
									Are you sure you want to delete it?
								</div>
								<footer class="slds-modal__footer">
									<lightning-button variant="neutral" label="Cancel" onclick={handleCancel}>
									</lightning-button>
									<lightning-button variant="destructive" label="Delete" onclick={handleDelete}>
									</lightning-button>
								</footer>
							</div>
						</section>
						<div class="slds-backdrop slds-backdrop_open"></div>
					</template>
				</template>

				<template if:true={isPostTab}>
					<c-employee-post-create-cmp post-record-id={recordId}></c-employee-post-create-cmp>

				</template>
				<template if:true={isHolidaysTab}>
					<c-holidays></c-holidays>
				</template>
			</div>
		</div>
		<div class="birthdayalign" style="width:33.5%;">
			<c-birthday-and-workanniversary></c-birthday-and-workanniversary>
		</div>
	</div>
	<!-- </div> -->
	<!-- <div class="birthdayalign" style="width:33.5%;">
		<c-birthday-and-workanniversary></c-birthday-and-workanniversary>
	</div> -->
	<!-- </div> -->


	<!-- <template if:true={announcements.data}>
        <template for:each={announcements.data} for:item="announcement">
            <div key={announcement}>
               <lightning-formatted-rich-text value={announcement}>
											</lightning-formatted-rich-text>
            </div>
        </template>
    </template> -->

</template>